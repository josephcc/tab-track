doctype html
html(lang='en')
  head
      meta(charset='utf-8')
      meta(http-equiv='X-UA-Compatible', content='IE=edge')
      meta(name='viewport', content='width=device-width, initial-scale=1')
      meta(name='description', content='')
      meta(name='author', content='')
      //link(rel='icon', href='../../favicon.ico')
      title Tab Tracker
      // Bootstrap core CSS
      link(href='/vendor/bootstrap/dist/css/bootstrap.min.css', rel='stylesheet')
      link(href='/css/tipsy.css', rel='stylesheet')
      link(href='/css/timeline.css', rel='stylesheet')


  body
    .container
      .jumbotron
        .row(style='display: flex; align-items: center;')
          .col-sm-4
            image(src='/img/tabtacular.png', style='width: 100%;')
          .col-sm-8
            h1
              | Tab Tracker
        br
        p
          | Thank you for participating in the browser tab usage study. Please
          | click the first two buttons to download your tab usage logs from
          | this Chrome extension. Before submitting the logs, you can review
          | them in Excel and blackout columns that you do not wish to share
          | with us. Please send your logs to josephcc@cmu.edu . Thank you!
        br
        p
          .row.text-center
            .col-sm-3
              button.download.all.btn.btn-lg.btn-success(type='button')
                | Download your logs
            .col-sm-3
              .dropdown.dropdown-lg
                button.btn.btn-lg.dropdown-toggle(type='button', data-toggle='dropdown')
                  | no URLs, no domains
                  span.caret
                ul.dropdown-menu
                  li
                    a.menu-item(href='#')
                      | no URLs or domains
                  li
                    a.menu-item.addDomain(href='#')
                      | domains only, no URLs
                  li
                    a.menu-item.addUrl.addDomain(href='#')
                      | URLs and domains
            .col-sm-3
              button.btn.btn-lg.render.btn-info(type='button')
                | Reload Viz
            .col-sm-3
              button.database.kill.btn.btn-lg.btn-danger(type='button', data-toggle="modal", data-target="#clearModal")
                | Clear database
      .row
        .col-sm-12
          .render_container(style='width: 100%; overflow: scroll;')

      .modal.fade#clearModal
        .modal-dialog
          .modal-content
            .modal-header
              button.close(type='button', data-dismiss='modal', aria-label='Close')
                span(aria-hidden='true') &times;
              h3.modal-title Clear Database 
            .modal-body
              p Are you sure you want to clear all of your tab log information (even though it has been anonymized)?
            .modal-footer
              button.btn.btn-default(type='button', data-dismiss='modal') Cancel 
              button.btn.btn-danger(type='button')#clearDB Clear DB

      // Placed at the end of the document so the pages load faster
      script(src='/js/uuid.js')
      script(src='/vendor/jquery/dist/jquery.min.js')
      script(src='/js/jquery.tipsy.js')
      script(src='/vendor/bootstrap/dist/js/bootstrap.min.js')
      script(src='/vendor/d3/d3.min.js')
      script(src='/vendor/bluebird/js/browser/bluebird.min.js')
      
      //Angular Scripts
      script(src="/vendor/underscore/underscore-min.js")
      script(src='/vendor/uri.js/src/URI.min.js')

      //Scripts to access the tab information
      script(src='/js/fsUtils.js')
      script(src='/vendor/dexie/dist/latest/Dexie.min.js')
      //script(src='/vendor/dexie/addons/Dexie.Observable/Dexie.Observable.js')
      script(src='/js/trackAPI.js')

      script(src='/vendor/cryptojslib/rollups/md5.js')
      script(src='/vendor/pleasejs/dist/Please.js')

      //Finally Load the Angular Controller
      script(src='/js/controller.js')
